---
import type { Job } from "../../data/experience.mock";

interface Props {
  jobs: Job[];
}

const { jobs } = Astro.props;
---

<ol class="relative border-s border-neutral-400">
  {
    jobs?.map(({ company, date, role, tasks }) => {
      return (
        <li class="mb-10 ms-4">
          <div class="absolute w-3 h-3 rounded-full mt-1.5 -start-1.5 borde border-gray-900 bg-amber-500" />

          <header class="flex flex-col">
            {role && <h3>{role}</h3>}

            {company && (
              <span class="text-neutral-400 font-bold text-sm">{company}</span>
            )}

            {date && (
              <time class="text-sm font-normal leading-none text-neutral-500">
                {date}
              </time>
            )}
          </header>

          <div class="space-y-4 mt-2">
            {tasks?.map((task) => {
              return (
                <div>
                  {task.title && <h4>{task.title}</h4>}

                  {Array.isArray(task.description) ? (
                    <ul class="list-disc ml-4 text-neutral-400">
                      {task?.description.map((description) => (
                        <li class="text-base font-normal">{description}</li>
                      ))}
                    </ul>
                  ) : (
                    <p class="mb-4 text-base font-normal">{task.description}</p>
                  )}

                  {task.url && (
                    <a
                      href={task.url}
                      class="ml-auto py-1.5 px-3 bg-tertiary hover:bg-white/10 p-2 rounded-xl text-white/80 hover:cursor-pointer hover:text-white transition-all duration-300"
                    >
                      Leer mas
                    </a>
                  )}
                </div>
              );
            })}
          </div>
        </li>
      );
    })
  }
</ol>
